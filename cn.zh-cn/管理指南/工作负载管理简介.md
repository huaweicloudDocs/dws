# 工作负载管理简介<a name="ZH-CN_TOPIC_0000001099664136"></a>

## 概览<a name="zh-cn_topic_0000001076801475_s167433362cb94da8a9c07a0a1b23bc70"></a>

当您有多个数据库用户同时查询作业时，一些复杂查询可能会长时间占用集群资源，从而影响其他查询的性能。例如一组数据库用户不断提交复杂、耗时的查询，而另一组用户经常提交短查询。在这种情况下，短时查询可能不得不在队列中等待耗时查询完成。

为了提高效率，您可以使用GaussDB\(DWS\) 工作负载管理功能处理这类问题，GaussDB\(DWS\) 工作负载管理以工作负载队列为资源承载，对于不同的业务类型可以创建不同的工作负载队列，为这些队列配置不同的资源占比，然后将数据库用户添加至对应的队列中，以此来限制这些数据库用户的资源使用。例如，将经常提交复杂查询作业的数据库用户分为一类，为这类用户创建一个工作负载队列并给这个队列分配多一些的资源，之后将这类用户添加至这个队列中，那么这类用户所提交的复杂作业只能使用所创建队列拥有的资源；同时再创建一个占用资源较少的队列分配给执行短查询的用户使用，这样两种作业就能够同时执行互不影响。

>![](public_sys-resources/icon-notice.gif) **须知：** 
>-   如果在旧版本数据库中从后台创建了资源池，需要删除后台创建的，从前台页面重新创建，详情请联系工程师。
>-   该特性仅8.0及以上版本支持。

## 页面概览<a name="zh-cn_topic_0000001076801475_sdc0bc098af1443608007611ee4ba8601"></a>

在工作负载管理页面，您可以修改工作负载管理的全局配置，可以在工作负载管理页面添加、创建、修改工作负载队列，添加数据库用户至队列，也可以将队列中的某个数据库用户从队列中移除。

## 短查询配置<a name="zh-cn_topic_0000001076801475_s4a09406e8f3349b291f6db0d5a9af329"></a>

在“短查询配置”一栏，您可以通过开关键决定是否开启短查询加速功能。如果需要对短查询并发数（默认为-1，0 或-1表示不控制）进行修改，可选择打开短查询加速。

![](figures/zh-cn_image_0000001146224555.png)

## 资源配置<a name="zh-cn_topic_0000001076801475_s5e5d6e352af34816a3d135a1b4e4d4ba"></a>

在“资源配置”一栏，您可以浏览当前工作负载队列的资源配置情况，包括“CPU资源（%）”、“内存资源（%）”、“存储资源（MB）”、“查询并发”。

![](figures/zh-cn_image_0000001146104639.png)

## 异常规则<a name="zh-cn_topic_0000001076801475_se98f1ed737af4df4adb73cd007b1b384"></a>

在“异常规则”一栏，您可以浏览当前工作负载队列中的异常规则设置情况，异常规则允许您对队列中用户执行的作业做异常控制。

![](figures/zh-cn_image_0000001146024611.png)

## 关联用户<a name="zh-cn_topic_0000001076801475_sa6c457572f8c403e9929518ebc352785"></a>

在“关联用户”一栏，您可以浏览当前工作负载队列中已关联的用户，且可以看到当前时间每个用户已使用的内存以及磁盘使用量，如下图所示。

![](figures/zh-cn_image_0000001099264814.png)

## 进入工作负载管理页面<a name="zh-cn_topic_0000001076801475_sb0abf51da61d4bd1a21fa301d188cd02"></a>

1.  登录GaussDB\(DWS\) 管理控制台。
2.  在集群列表中单击需要访问“工作负载管理”页面的集群名称。
3.  切换至“工作负载管理”页签。

## 打开或关闭工作负载管理<a name="zh-cn_topic_0000001076801475_se53c1a89a25d499ca78e6bc9d039c4eb"></a>

工作负载管理配置包括工作负载开关、全局最大并发数。这里的全局最大并发数指的是单个CN上的最大并发数，如果您通过工作负载开关关闭了工作负载管理功能，那么所有的工作负载管理功能将不再可用。

![](figures/1.png)

