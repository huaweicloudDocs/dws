# 监控集群<a name="dws_01_0022"></a>

## 操作场景<a name="section43782126162722"></a>

用户需要查看集群的监控指标信息时，可以通过云监控（Cloud Eye）确认集群各项指标情况。通过监控集群运行时的各项指标，用户可以识别出数据库集群状态异常的时间段，然后在数据库日志中，分析可能存在问题的活动，从而优化数据库性能。本章节包含如下内容：

-   [集群监控指标](#section185715586432)
-   [查看集群监控信息](#section26007147165750)
-   [多节点间的监控指标对比](#section20548025153518)
-   [创建告警规则](#section76461040113)
-   [配置OBS转储](#section61821139193716)

## 集群监控指标<a name="section185715586432"></a>

通过云监控提供的数据仓库服务相关监控指标，用户可以获取有关集群运行状况和性能的信息，并深入了解节点级别的对应信息。

数据仓库服务相关监控指标，具体请参见[表1](#table17857105810438)。

**表 1**  数据仓库服务监控指标

<a name="table17857105810438"></a>
<table><thead align="left"><tr id="row3845105854319"><th class="cellrowborder" valign="top" width="18.6%" id="mcps1.2.5.1.1"><p id="p784515581437"><a name="p784515581437"></a><a name="p784515581437"></a><strong id="b884518582433"><a name="b884518582433"></a><a name="b884518582433"></a>指标名称</strong></p>
</th>
<th class="cellrowborder" valign="top" width="50.949999999999996%" id="mcps1.2.5.1.2"><p id="p284513586434"><a name="p284513586434"></a><a name="p284513586434"></a><strong id="b14845858114310"><a name="b14845858114310"></a><a name="b14845858114310"></a>解释</strong></p>
</th>
<th class="cellrowborder" valign="top" width="17.29%" id="mcps1.2.5.1.3"><p id="p78458586432"><a name="p78458586432"></a><a name="p78458586432"></a><strong id="b6845105817433"><a name="b6845105817433"></a><a name="b6845105817433"></a>取值范围</strong></p>
</th>
<th class="cellrowborder" valign="top" width="13.16%" id="mcps1.2.5.1.4"><p id="p1384520586435"><a name="p1384520586435"></a><a name="p1384520586435"></a><strong id="b38451589434"><a name="b38451589434"></a><a name="b38451589434"></a>指标主体</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="row128461658104319"><td class="cellrowborder" valign="top" width="18.6%" headers="mcps1.2.5.1.1 "><p id="p1484615884315"><a name="p1484615884315"></a><a name="p1484615884315"></a>缓存命中率</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.2.5.1.2 "><p id="p784620587438"><a name="p784620587438"></a><a name="p784620587438"></a>该指标用于表示需要访问的数据，在内存中可以直接获取的数据量比例，以百分比为单位。</p>
</td>
<td class="cellrowborder" valign="top" width="17.29%" headers="mcps1.2.5.1.3 "><p id="p1846145854311"><a name="p1846145854311"></a><a name="p1846145854311"></a>0%～100%</p>
</td>
<td class="cellrowborder" rowspan="9" valign="top" width="13.16%" headers="mcps1.2.5.1.4 "><p id="p08460585439"><a name="p08460585439"></a><a name="p08460585439"></a>数据仓库集群</p>
</td>
</tr>
<tr id="row1084745818438"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p158461558144311"><a name="p158461558144311"></a><a name="p158461558144311"></a>内存中排序比率</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p10846185824315"><a name="p10846185824315"></a><a name="p10846185824315"></a>该指标用于表示在数据进行排序时，可以直接在内存中排序的数据量比例，以百分比为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p084765824317"><a name="p084765824317"></a><a name="p084765824317"></a>0%～100%</p>
</td>
</tr>
<tr id="row1384711586430"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p2084735817433"><a name="p2084735817433"></a><a name="p2084735817433"></a>文件读取次数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1584725804320"><a name="p1584725804320"></a><a name="p1584725804320"></a>该指标用于表示读取数据库文件的累计次数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p5847175804315"><a name="p5847175804315"></a><a name="p5847175804315"></a>&gt; 0</p>
</td>
</tr>
<tr id="row1984835818434"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p0847195817435"><a name="p0847195817435"></a><a name="p0847195817435"></a>文件写入次数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p884895864319"><a name="p884895864319"></a><a name="p884895864319"></a>该指标用于表示写入数据库文件的累计次数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p1384865811434"><a name="p1384865811434"></a><a name="p1384865811434"></a>&gt; 0</p>
</td>
</tr>
<tr id="row6848195824313"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p3848185884320"><a name="p3848185884320"></a><a name="p3848185884320"></a>每秒文件读取次数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p128481058154310"><a name="p128481058154310"></a><a name="p128481058154310"></a>该指标用于表示每秒读取数据库文件的次数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p108486588432"><a name="p108486588432"></a><a name="p108486588432"></a>≥ 0</p>
</td>
</tr>
<tr id="row28491058174310"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p1184805813438"><a name="p1184805813438"></a><a name="p1184805813438"></a>每秒文件写入次数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p4848958114313"><a name="p4848958114313"></a><a name="p4848958114313"></a>该指标用于表示每秒写入数据库文件的次数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p38481158124317"><a name="p38481158124317"></a><a name="p38481158124317"></a>≥ 0</p>
</td>
</tr>
<tr id="row11849195834313"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p28491958194310"><a name="p28491958194310"></a><a name="p28491958194310"></a>数据量大小</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p284955854314"><a name="p284955854314"></a><a name="p284955854314"></a>该指标用于表示数据库中所有数据总量大小，以兆字节（MB）为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p1484985824317"><a name="p1484985824317"></a><a name="p1484985824317"></a>0MB～36000MB</p>
</td>
</tr>
<tr id="row1285095884312"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p784912582432"><a name="p784912582432"></a><a name="p784912582432"></a>活跃SQL数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p785012582438"><a name="p785012582438"></a><a name="p785012582438"></a>该指标用于表示数据库当前活动的SQL个数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p17850175894315"><a name="p17850175894315"></a><a name="p17850175894315"></a>≥ 0</p>
</td>
</tr>
<tr id="row385012587435"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p185011582431"><a name="p185011582431"></a><a name="p185011582431"></a>会话数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1850195844317"><a name="p1850195844317"></a><a name="p1850195844317"></a>该指标用于表示数据库当前访问的连接个数。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p785035874315"><a name="p785035874315"></a><a name="p785035874315"></a>≥ 0</p>
</td>
</tr>
<tr id="row08511458144319"><td class="cellrowborder" valign="top" width="18.6%" headers="mcps1.2.5.1.1 "><p id="p13850135819436"><a name="p13850135819436"></a><a name="p13850135819436"></a>CPU使用率</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.2.5.1.2 "><p id="p9851175874310"><a name="p9851175874310"></a><a name="p9851175874310"></a>该指标用于统计每个集群节点的CPU使用率，以百分比为单位。</p>
</td>
<td class="cellrowborder" valign="top" width="17.29%" headers="mcps1.2.5.1.3 "><p id="p1385185884315"><a name="p1385185884315"></a><a name="p1385185884315"></a>0%～100%</p>
</td>
<td class="cellrowborder" rowspan="13" valign="top" width="13.16%" headers="mcps1.2.5.1.4 "><p id="p198511458204314"><a name="p198511458204314"></a><a name="p198511458204314"></a>集群节点</p>
</td>
</tr>
<tr id="row2851458144317"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p168511658124318"><a name="p168511658124318"></a><a name="p168511658124318"></a>内存使用率</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p2851105820435"><a name="p2851105820435"></a><a name="p2851105820435"></a>该指标用于统计每个集群节点的内存使用率，以百分比为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p1851658184320"><a name="p1851658184320"></a><a name="p1851658184320"></a>0%～100%</p>
</td>
</tr>
<tr id="row3851135815433"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p3851155818437"><a name="p3851155818437"></a><a name="p3851155818437"></a>IOPS</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1485185818433"><a name="p1485185818433"></a><a name="p1485185818433"></a>该指标用于统计每个集群节点每秒处理的I/O请求数量。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p2085135819437"><a name="p2085135819437"></a><a name="p2085135819437"></a>≥ 0</p>
</td>
</tr>
<tr id="row14853125812437"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p168513588430"><a name="p168513588430"></a><a name="p168513588430"></a>网络输入吞吐量</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p7851185820438"><a name="p7851185820438"></a><a name="p7851185820438"></a>该指标用于统计每秒从网络输入每个集群节点的数据总量。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p5851195819434"><a name="p5851195819434"></a><a name="p5851195819434"></a>≥ 0字节/秒</p>
</td>
</tr>
<tr id="row20853195816432"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p12853125884310"><a name="p12853125884310"></a><a name="p12853125884310"></a>网络输出吞吐量</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p118532586431"><a name="p118532586431"></a><a name="p118532586431"></a>该指标用于统计从每个节点每秒发送到网络的数据总量。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p785385854318"><a name="p785385854318"></a><a name="p785385854318"></a>≥ 0字节/秒</p>
</td>
</tr>
<tr id="row158532585437"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p1853115894318"><a name="p1853115894318"></a><a name="p1853115894318"></a>磁盘使用率</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1285335824312"><a name="p1285335824312"></a><a name="p1285335824312"></a>该指标用于统计每个集群节点的磁盘使用情况，以百分比为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p1585365884316"><a name="p1585365884316"></a><a name="p1585365884316"></a>0%～100%</p>
</td>
</tr>
<tr id="row7854358184310"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p9854115819432"><a name="p9854115819432"></a><a name="p9854115819432"></a>磁盘总大小</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p2085420588436"><a name="p2085420588436"></a><a name="p2085420588436"></a>该指标用于统计每个集群节点的数据磁盘总大小，以吉字节（GB）为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p6854658184320"><a name="p6854658184320"></a><a name="p6854658184320"></a>100GB～2000GB</p>
</td>
</tr>
<tr id="row138541258204314"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p2085418580434"><a name="p2085418580434"></a><a name="p2085418580434"></a>磁盘使用量</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p15854175834314"><a name="p15854175834314"></a><a name="p15854175834314"></a>该指标用于统计每个集群节点的数据磁盘已用大小，以吉字节（GB）为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p785412581437"><a name="p785412581437"></a><a name="p785412581437"></a>0GB～3600GB</p>
</td>
</tr>
<tr id="row17854958194315"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p1985455854314"><a name="p1985455854314"></a><a name="p1985455854314"></a>磁盘读吞吐量</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1985415586433"><a name="p1985415586433"></a><a name="p1985415586433"></a>该指标用于统计集群节点数据磁盘每秒读取的数据量，以字节/秒为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p18854165834316"><a name="p18854165834316"></a><a name="p18854165834316"></a>≥ 0字节/秒</p>
</td>
</tr>
<tr id="row1385425815435"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p7854358114310"><a name="p7854358114310"></a><a name="p7854358114310"></a>磁盘写吞吐量</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p15854135894318"><a name="p15854135894318"></a><a name="p15854135894318"></a>该指标用于统计集群节点数据磁盘每秒写入的数据量，以字节/秒为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p085420584433"><a name="p085420584433"></a><a name="p085420584433"></a>≥ 0字节/秒</p>
</td>
</tr>
<tr id="row7855195834313"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p1885417580434"><a name="p1885417580434"></a><a name="p1885417580434"></a>磁盘读耗时</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p2085435818431"><a name="p2085435818431"></a><a name="p2085435818431"></a>该指标用于统计集群节点数据磁盘每次读取数据的平均耗时，以秒为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p16854258114318"><a name="p16854258114318"></a><a name="p16854258114318"></a>&gt; 0秒</p>
</td>
</tr>
<tr id="row38551583436"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p19855125813435"><a name="p19855125813435"></a><a name="p19855125813435"></a>磁盘写耗时</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p1885516586439"><a name="p1885516586439"></a><a name="p1885516586439"></a>该指标用于统计集群节点数据磁盘每次写入数据的平均耗时，以秒为单位。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p4855145804311"><a name="p4855145804311"></a><a name="p4855145804311"></a>&gt; 0秒</p>
</td>
</tr>
<tr id="row385715581436"><td class="cellrowborder" valign="top" headers="mcps1.2.5.1.1 "><p id="p7855358184319"><a name="p7855358184319"></a><a name="p7855358184319"></a>磁盘平均队列长度</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.2 "><p id="p5855165818437"><a name="p5855165818437"></a><a name="p5855165818437"></a>该指标用于统计每个集群节点数据磁盘平均的I/O队列长度。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.5.1.3 "><p id="p5857145818432"><a name="p5857145818432"></a><a name="p5857145818432"></a>≥ 0</p>
</td>
</tr>
</tbody>
</table>

## 查看集群监控信息<a name="section26007147165750"></a>

1.  登录[DWS管理控制台](https://console.huaweicloud.com/dws)。
2.  单击“集群管理“。
3.  在集群列表中，在指定集群所在行，单击“查看监控指标“，打开云监控管理控制台。

    云监控支持查看数据仓库服务中数据仓库集群的监控信息，支持查看集群中各个节点各项监控信息。用户可以根据需要，选择指定的监控指标名称以及时间范围，从而显示监控指标的性能曲线。

    云监控也支持多个节点间的监控指标对比，具体操作请参见[多节点间的监控指标对比](#section20548025153518)。


## 多节点间的监控指标对比<a name="section20548025153518"></a>

1.  在云监控管理控制台的左侧导航栏中，单击“总览  \>  监控面板“。
2.  在“监控面板“页面，单击“创建监控面板“，在弹出对话框中，输入“名称“后，单击“确定“。
3.  在“监控面板“页面，单击左上角的“添加监控视图“。
4.  在弹出的“添加监控视图“窗口中，配置标题和监控项。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >单击“添加监控项“可以添加多个监控指标。  

    **图 1**  添加监控视图<a name="fig259081012442"></a>  
    ![](figures/添加监控视图.png "添加监控视图")

    以对比两个节点间的CPU使用率为例，参数设置如下表所示。

    **表 2**  配置样例

    <a name="table531634516736"></a>
    <table><thead align="left"><tr id="row4060451616736"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p568376716736"><a name="p568376716736"></a><a name="p568376716736"></a>参数名</p>
    </th>
    <th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p5773201616736"><a name="p5773201616736"></a><a name="p5773201616736"></a>样例值</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row4982610116736"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p2261359816417"><a name="p2261359816417"></a><a name="p2261359816417"></a>资源类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p2177264216736"><a name="p2177264216736"></a><a name="p2177264216736"></a>数据仓库服务</p>
    </td>
    </tr>
    <tr id="row6173605316736"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p3456440016736"><a name="p3456440016736"></a><a name="p3456440016736"></a>维度</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p52128907161035"><a name="p52128907161035"></a><a name="p52128907161035"></a>数据仓库节点</p>
    </td>
    </tr>
    <tr id="row3162373816736"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1138595516736"><a name="p1138595516736"></a><a name="p1138595516736"></a>监控对象</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p4984712416736"><a name="p4984712416736"></a><a name="p4984712416736"></a>dws-64a3-dws-dn-1-1</p>
    <p id="p50143521161249"><a name="p50143521161249"></a><a name="p50143521161249"></a>dws-64a3-dws-cn-cn-1-1</p>
    </td>
    </tr>
    <tr id="row4150216216921"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p623199316921"><a name="p623199316921"></a><a name="p623199316921"></a>监控指标</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p3502938716921"><a name="p3502938716921"></a><a name="p3502938716921"></a>CPU使用率</p>
    </td>
    </tr>
    </tbody>
    </table>

5.  单击“确定“。

    添加成功后，可在“监控面板“区域看到对应的监控视图。鼠标移至监控视图单击左上角的![](figures/icon_dws_monitor_detail.png)，可放大监控视图，查看详细的指标对比数据。


## 创建告警规则<a name="section76461040113"></a>

通过设置DWS的告警规则，用户可以自定义监控目标和通知策略，及时了解DWS运行状态，从而起到预警作用。

设置DWS的告警规则包括设置告警规则名称、监控对象、监控指标、告警阈值、监控周期和是否发送通知等参数。本节介绍设置DWS规则的具体方法。

1.  通过访问以下地址登录DWS管理控制台：[https://console.huaweicloud.com/dws](https://console.huaweicloud.com/dws)。
2.  在左侧导航栏中选择“集群管理”。
3.  在指定集群所在行的“操作”列中，单击“查看监控信息”，进入云监控管理控制台，查看数据仓库服务监控信息。

    确认待查看“监控信息”的集群状态必须为“服务中”，否则不能进行创建告警操作。

4.  在左侧导航树栏，选择“告警 \> 告警规则“。
5.  在“告警规则”界面，单击右上方“创建告警规则”，或者选择已有的告警规则进行修改，设置数据仓库服务的告警规则。

    -   已有告警模板，请使用告警模板创建告警规则。
    -   没有告警模板，则根据云监控提供的创建自定义告警功能创建自定义告警规则。
        1.  选择监控对象，根据界面提示配置参数，然后单击“下一步”。

            **图 2**  选择监控对象<a name="fig91950115255"></a>  
            ![](figures/选择监控对象.png "选择监控对象")

            -   服务类型：选择“数据仓库服务”。
            -   服务维度：选择“数据仓库节点”。
            -   监控对象：选择您创建的集群实例ID。

        2.  选择监控指标，根据界面配置参数，然后单击“下一步”。

            **图 3**  选择监控指标<a name="fig14195412252"></a>  
            ![](figures/选择监控指标.png "选择监控指标")

            -   选择类型：可以选择从模板导入和自定义创建。数据仓库服务当前未提供模板，请选择自定义创建。
            -   监控指标：从数据仓库服务支持的监控指标中选择。请参见[表1](#table17857105810438)。
            -   阈值：由聚合类型（原始值、平均值、最大值、最小值、求和值和方差值）、判断条件（\>、\>=、<、<=、=）、临界值三部分组成，用来配置告警条件，例如“平均值\>80”就是一个告警条件。用户可以按需自定义设置。
            -   连续出现次数：触发告警时的采样点数目。 例如：出现次数配置为n，则告警规则的采样点是连续n个监控周期（原始数据使用5分钟的默认监控周期）的采样点，当这些采样点全部满足阈值中配置的告警条件，告警规的状态才会刷新为告警。您可以按需自定义设置。
            -   监控周期：告警规则刷新告警状态的周期。用户可以按需自定义设置。
            -   发送通知：选择发送通知。
            -   主题名称：可以选择已经存在的主题名称，也可以自定义创建新的主题。
            -   触发条件：可以选择出现告警、恢复正常或数据不足，作为说明触发告警的条件。

        3.  规则信息，根据界面提示配置参数，然后单击“添加”。完成告警规则的添加。
            -   名称：系统会随机产生一个名称，用户也可以进行修改。
            -   描述：告警规则描述（此参数非必填项）。



    DWS告警规则设置完成后，当符合规则的告警产生时，系统会自动进行通知。

    当需要修改告警规则时，可以参见[《云监控用户指南》](https://support.huaweicloud.com/ces/index.html)进行修改。


## 配置OBS转储<a name="section61821139193716"></a>

云监控各监控指标的原始数据的保留周期为两天，超过保留周期后原始数据将不再保存。用户可以开通对象存储服务，然后将原始数据同步保存至OBS，以保存更长时间。

关于如何配置OBS转储，具体请参见[《云监控服务用户指南》](https://support.huaweicloud.com/ces/index.html)中“配置OBS转储“章节。

